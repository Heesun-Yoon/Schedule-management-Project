<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
   "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="schedule">

<select id="scheduleList" resultType="sdto" parameterType="map">
	select * from tbl_schedule where seq = (select seq from tbl_member where id=#{id} and pw=#{pw})
</select>

<select id="scheduleList_cnt" resultType="scdto" parameterType="map">
select
    (select count(*) from tbl_schedule where member_seq = #{member_seq} and start_time <![CDATA[>sysdate]]>) as todo_cnt , 
    (select count(*) from tbl_schedule where member_seq = #{member_seq} and start_time <![CDATA[<sysdate]]> and end_time <![CDATA[>sysdate]]>) as doing_cnt , 
    (select count(*) from tbl_schedule where member_seq = #{member_seq} and end_time <![CDATA[<sysdate]]>) as done_cnt  
from tbl_member where id=#{id} and pw=#{pw}
</select> 



</mapper>  